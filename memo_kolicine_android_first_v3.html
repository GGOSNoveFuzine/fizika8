<!doctype html>
<html lang="sl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spomin na SI ‚Äì 4 segmenti (1/2 igralca, 4/7 koliƒçin)</title>
<meta name="description" content="Igra spomina s 4 segmenti: koliƒçina, simbol, enota SI, merilna naprava. Te≈æavnost 4 ali 7 osnovnih koliƒçin. Naƒçin: 1 ali 2 igralca. Vkljuƒçeni zvoƒçni in vizualni uƒçinki." />
<style>
  :root{
    --bg:#0b1220; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --line:#233044;
    --ok:#22c55e; --bad:#ef4444; --hint:#60a5fa; --active:#3b82f6;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;
    background: radial-gradient(1200px 600px at 20% -10%,#1f2a4a 0%,#0b1220 45%,#070b16 100%);
    color:var(--text); padding:16px; display:flex; gap:16px; flex-direction:column; align-items:center;
  }
  header{width:100%; max-width:1120px; display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap}
  h1{margin:0; font-size:clamp(18px,2.6vw,28px)}
  .controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .group{display:flex; gap:6px; padding:4px; border:1px solid var(--line); border-radius:12px; background:#0a1220}
  .btn, .toggle{
    background:#0b1220; border:1px solid var(--line); color:var(--text);
    padding:8px 12px; border-radius:10px; font-weight:600; letter-spacing:.2px; cursor:pointer;
  }
  .btn:hover, .toggle:hover{border-color:#3b4b66}
  .toggle[aria-pressed="true"]{border-color:var(--active); box-shadow:0 0 0 2px rgba(59,130,246,.25) inset}

  .stats{width:100%; max-width:1120px; display:flex; gap:8px; flex-wrap:wrap; color:var(--muted)}
  .stat{padding:6px 10px; border:1px solid var(--line); border-radius:10px; background:#08101e}
  .stat strong{color:#fff}
  .turn{border-color:#3b82f6; box-shadow:0 0 0 1px rgba(59,130,246,.3) inset}

  .wrap{width:100%; max-width:1120px; display:grid; gap:12px; grid-template-columns: repeat(4, 1fr)}
  @media (max-width:980px){ .wrap{grid-template-columns: repeat(2,1fr)} }
  @media (max-width:640px){ .wrap{grid-template-columns: 1fr} }

  .segment{
    background: linear-gradient(180deg,#0f172a,#0b1220); border:1px solid var(--line); border-radius:14px; padding:12px;
    display:flex; flex-direction:column; gap:10px; min-height:320px;
  }
  .seg-head{display:flex; align-items:center; justify-content:space-between; gap:8px}
  .seg-title{font-weight:800; letter-spacing:.3px; color:#cbd5e1}
  .seg-info{font-size:12px; color:#94a3b8}
  .cards{display:grid; grid-template-columns:1fr; gap:8px; min-height:120px}

  /* card + flip */
  .card{position:relative; height:112px; perspective:800px; cursor:pointer}
  @media (min-width:1100px){ .card{height:120px} }
  .inner{position:absolute; inset:0; transition:transform .4s; transform-style:preserve-3d}
  .card.hidden .inner{transform:rotateY(0deg)}
  .card.revealed .inner{transform:rotateY(180deg)}
  .face,.back{
    position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; backface-visibility:hidden;
    border-radius:12px; padding:10px;
  }
  .back{background:#1e293b; color:#e2e8f0; border:1px solid #16314a; font-weight:800; font-size:24px}
  .face{
    transform:rotateY(180deg);
    background:linear-gradient(180deg,#0f172a,#0c1526);
    border:1px solid #334155;
  }
  .face .top{display:flex; justify-content:space-between; width:100%; font-size:12px; color:#b6c2d1}
  .face .main{
    font-size: clamp(18px, 2.3vw, 22px);
    font-weight:900;
    color:#ffffff;
    letter-spacing:.2px;
    margin-top:4px;
    text-shadow: 0 1px 2px rgba(0,0,0,.45);
  }
  .face .sub{font-size:12px; color:#9fb3c8; margin-top:2px}

  .card.selected .face{outline:2px solid var(--hint)}
  .card.bad .face{outline:2px solid var(--bad); animation: shake .32s linear}
  @keyframes shake{
    0%,100%{transform:translateX(0)}
    20%{transform:translateX(-4px)}
    40%{transform:translateX(4px)}
    60%{transform:translateX(-3px)}
    80%{transform:translateX(3px)}
  }

  /* Matched ‚Äì ostanejo vidne, obarvane po skupinah */
  .card.matched{pointer-events:none}
  .card.matched .back{opacity:.2}
  .card.matched .face{color:#fff; border-color:transparent}
  .card.matched .face .top{color:rgba(255,255,255,.85)}
  .card.matched .face .sub{color:rgba(255,255,255,.9)}
  .card.matched[data-group="dolzina"] .face{background:linear-gradient(180deg, rgba(139,92,246,.25), rgba(139,92,246,.15)); box-shadow:0 0 0 2px rgba(139,92,246,.55) inset}
  .card.matched[data-group="masa"] .face{background:linear-gradient(180deg, rgba(6,182,212,.25), rgba(6,182,212,.15)); box-shadow:0 0 0 2px rgba(6,182,212,.55) inset}
  .card.matched[data-group="cas"] .face{background:linear-gradient(180deg, rgba(34,197,94,.25), rgba(34,197,94,.15)); box-shadow:0 0 0 2px rgba(34,197,94,.55) inset}
  .card.matched[data-group="temperatura"] .face{background:linear-gradient(180deg, rgba(249,115,22,.25), rgba(249,115,22,.15)); box-shadow:0 0 0 2px rgba(249,115,22,.55) inset}
  .card.matched[data-group="kolicina_snovi"] .face{background:linear-gradient(180deg, rgba(234,179,8,.28), rgba(234,179,8,.17)); box-shadow:0 0 0 2px rgba(234,179,8,.60) inset}
  .card.matched[data-group="tok"] .face{background:linear-gradient(180deg, rgba(59,130,246,.28), rgba(59,130,246,.17)); box-shadow:0 0 0 2px rgba(59,130,246,.60) inset}
  .card.matched[data-group="svetlobna"] .face{background:linear-gradient(180deg, rgba(239,68,68,.28), rgba(239,68,68,.17)); box-shadow:0 0 0 2px rgba(239,68,68,.60) inset}

  /* win modal */
  .overlay{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; padding:16px; z-index:50}
  .overlay.show{display:flex}
  .dialog{width:min(560px,96%); background:#0b1220; border:1px solid var(--line); border-radius:16px; padding:18px}
  .dialog h2{margin:0 0 8px}
  .winner{margin-top:8px; font-weight:800}

  /* ‚ö° Flash overlay (menjava igralca / zmaga) */
  .flash{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60;
    pointer-events:none;
  }
  .flash.show{display:flex; animation: fadeFlash .9s ease forwards}
  .flash .bubble{
    background: rgba(10, 18, 32, 0.85);
    border: 2px solid #3b82f6;
    border-radius: 16px;
    padding: 16px 28px;
    font-size: clamp(28px,4vw,44px);
    font-weight: 900;
    letter-spacing: .5px;
    text-shadow: 0 2px 8px rgba(0,0,0,.4);
  }
  .flash.win .bubble{
    border-color: #22c55e;
  }
  @keyframes fadeFlash{
    0%{opacity:0; transform: scale(.96)}
    10%{opacity:1; transform: scale(1)}
    80%{opacity:1}
    100%{opacity:0}
  }


<script>
/* === Android-first responsive with optional Fit-to-screen toggle === */
(function(){
  const isiOS = /iP(hone|od|ad)/.test(navigator.platform) || (/Macintosh/.test(navigator.userAgent) && 'ontouchend' in document);
  let root=null, stage=null, movedNodes=null, enabled=false, rafId=0;

  function ensureRoot(){
    if (root && root.isConnected) return root;
    root = document.getElementById('fitRoot');
    if (!root){
      root = document.createElement('div');
      root.id = 'fitRoot';
      root.style.position = 'fixed';
      root.style.inset = '0';
      root.style.width = '100vw';
      root.style.height = '100vh';
      root.style.overflow = 'hidden';
      root.style.zIndex = '0';
      try{ root.style.width = '100dvw'; root.style.height = '100dvh'; }catch(e){}
      document.body.prepend(root);
    }
    if (!stage){
      stage = document.createElement('div');
      stage.id = 'fitStage';
      stage.style.transformOrigin = 'top left';
      stage.style.willChange = 'transform';
      root.appendChild(stage);
    }
    return root;
  }

  function enableFit(){
    if (enabled) return;
    enabled = true;
    ensureRoot();
    movedNodes = [];
    const kids = Array.from(document.body.children);
    for (const node of kids){
      if (node === root) continue;
      if (node.tagName === 'SCRIPT') continue;
      movedNodes.push(node);
      stage.appendChild(node);
    }
    scheduleFit();
  }
  function disableFit(){
    if (!enabled) return;
    enabled = false;
    if (stage && movedNodes){
      for (const node of movedNodes){
        document.body.appendChild(node);
      }
    }
    movedNodes = null;
    if (stage){ stage.style.transform='none'; stage.style.width=''; stage.style.height=''; }
    if (root){ root.remove(); }
    root=null; stage=null;
  }

  function fit(){
    if (!enabled) return;
    const vp = window.visualViewport;
    const ww = vp ? vp.width : window.innerWidth;
    const wh = vp ? vp.height : window.innerHeight;

    stage.style.transform = 'none'; stage.style.width=''; stage.style.height='';
    const contentW = Math.max(stage.scrollWidth, stage.offsetWidth);
    const contentH = Math.max(stage.scrollHeight, stage.offsetHeight);
    const scale = Math.min(1, ww / contentW, wh / contentH);
    stage.style.transform = 'scale(' + scale + ')';
    stage.style.width  = (100/scale) + 'vw';
    stage.style.height = 'calc(' + (100/scale) + 'vh)';
  }
  function scheduleFit(){
    cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(()=>{ requestAnimationFrame(fit); });
  }

  function addToggle(){
    const btn = document.createElement('button');
    btn.className = 'fit-toggle';
    btn.id = 'fitToggle';
    btn.type = 'button';
    btn.setAttribute('aria-pressed', 'false');
    btn.textContent = 'üî≤ Prilega zaslonu';
    btn.title = 'Prika≈æi vse na eni strani (uporabno na iPhone).';
    btn.addEventListener('click', ()=>{
      const active = btn.getAttribute('aria-pressed') === 'true';
      if (active){ btn.setAttribute('aria-pressed','false'); disableFit(); }
      else{ btn.setAttribute('aria-pressed','true'); enableFit(); }
    });
    const host = document.querySelector('.controls') || document.querySelector('.topbar') || document.body;
    if (host === document.body){
      const wrap = document.createElement('div');
      wrap.style.position='fixed'; wrap.style.top='10px'; wrap.style.right='10px'; wrap.style.zIndex='9999';
      wrap.appendChild(btn);
      document.body.appendChild(wrap);
    }else{
      host.appendChild(btn);
    }
  }

  function showIOSHint(){
    if (!isiOS) return;
    if (sessionStorage.getItem('iosHintShown')) return;
    const hint = document.createElement('div');
    hint.id = 'iosHint';
    hint.innerHTML = 'Na iPhone lahko uporabi≈° ‚ÄúPrilega zaslonu‚Äù, da so vse kartice vidne. <button id="iosHintOk">V redu</button>';
    document.body.appendChild(hint);
    document.getElementById('iosHintOk').addEventListener('click', ()=>{
      sessionStorage.setItem('iosHintShown','1');
      hint.remove();
    });
  }

  window.addEventListener('load', ()=>{
    addToggle();
    showIOSHint();
    if (window.visualViewport){
      window.visualViewport.addEventListener('resize', scheduleFit);
      window.visualViewport.addEventListener('scroll', scheduleFit);
    }
    window.addEventListener('resize', scheduleFit);
    window.addEventListener('orientationchange', scheduleFit);
  }, { once: true });
})();
</script>
</body>
</html>
