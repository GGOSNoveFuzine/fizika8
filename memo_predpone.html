<!doctype html>
<html lang="sl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Predpone SI ‚Äì Spomin (3 segmenti, 3 te≈æavnosti)</title>
<meta name="description" content="Spomin o metriƒçnih predponah SI: predpona, znak, deseti≈°ka potenca. 1 ali 2 igralca. Te≈æavnosti: Lahka (10¬≥‚Ä¶10‚Åª¬≥ + 10‚Å∞), Srednja (+10‚Å∂, 10‚Åª‚Å∂), Te≈æka (10¬π¬≤‚Ä¶10‚Åª¬π¬≤ + 10‚Å∞)." />
<style>
  :root{
    --bg:#0b1220; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --line:#233044;
    --ok:#22c55e; --bad:#ef4444; --hint:#60a5fa; --active:#3b82f6;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;
    background: radial-gradient(1200px 600px at 20% -10%,#1f2a4a 0%,#0b1220 45%,#070b16 100%);
    color:var(--text); padding:16px; display:flex; gap:16px; flex-direction:column; align-items:center;
    transition: font-size .2s ease;
  }
  header{width:100%; max-width:1120px; display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap}
  h1{margin:0; font-size:clamp(18px,2.6vw,28px)}
  .controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .group{display:flex; gap:6px; padding:4px; border:1px solid var(--line); border-radius:12px; background:#0a1220}
  .btn, .toggle{
    background:#0b1220; border:1px solid var(--line); color:var(--text);
    padding:8px 12px; border-radius:10px; font-weight:600; letter-spacing:.2px; cursor:pointer;
  }
  .btn:hover, .toggle:hover{border-color:#3b4b66}
  .toggle[aria-pressed="true"]{border-color:var(--active); box-shadow:0 0 0 2px rgba(59,130,246,.25) inset}

  .stats{width:100%; max-width:1120px; display:flex; gap:8px; flex-wrap:wrap; color:var(--muted)}
  .stat{padding:6px 10px; border:1px solid var(--line); border-radius:10px; background:#08101e}
  .stat strong{color:#fff}
  .turn{border-color:#3b82f6; box-shadow:0 0 0 1px rgba(59,130,246,.3) inset}

  .wrap{width:100%; max-width:1120px; display:grid; gap:12px; grid-template-columns: repeat(3, 1fr)}
  @media (max-width:980px){ .wrap{grid-template-columns: 1fr} }

  .segment{
    background: linear-gradient(180deg,#0f172a,#0b1220); border:1px solid var(--line); border-radius:14px; padding:12px;
    display:flex; flex-direction:column; gap:10px; min-height:320px;
  }
  .seg-head{display:flex; align-items:center; justify-content:space-between; gap:8px}
  .seg-title{font-weight:800; letter-spacing:.3px; color:#cbd5e1}
  .seg-info{font-size:12px; color:#94a3b8}

  /* Default: 1 column per segment */
  .cards{display:grid; grid-template-columns:1fr; gap:8px; min-height:120px}

  /* HARD MODE layout: smaller cards + 2 columns inside each segment */
  body[data-mode="hard"] .cards{grid-template-columns: repeat(2, minmax(0,1fr)); gap:8px}
  /* On very small screens, fall back to 1 column to keep readability */
  @media (max-width:520px){
    body[data-mode="hard"] .cards{grid-template-columns: 1fr}
  }

  /* card + flip */
  .card{position:relative; height:112px; perspective:800px; cursor:pointer}
  @media (min-width:1100px){ .card{height:120px} }

  /* Smaller cards specifically in HARD MODE */
  body[data-mode="hard"] .card{height:96px}
  @media (min-width:1100px){
    body[data-mode="hard"] .card{height:100px}
  }

  .inner{position:absolute; inset:0; transition:transform .4s; transform-style:preserve-3d}
  .card.hidden .inner{transform:rotateY(0deg)}
  .card.revealed .inner{transform:rotateY(180deg)}
  .face,.back{
    position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; backface-visibility:hidden;
    border-radius:12px; padding:10px;
  }
  .back{background:#1e293b; color:#e2e8f0; border:1px solid #16314a; font-weight:800; font-size:24px}
  .face{
    transform:rotateY(180deg);
    background:linear-gradient(180deg,#0f172a,#0c1526);
    border:1px solid #334155;
  }
  .face .top{display:flex; justify-content:space-between; width:100%; font-size:12px; color:#b6c2d1}
  .face .main{
    font-size: clamp(18px, 2.3vw, 22px);
    font-weight:900;
    color:#ffffff;
    letter-spacing:.2px;
    margin-top:4px;
    text-shadow: 0 1px 2px rgba(0,0,0,.45);
  }
  .face .sub{font-size:12px; color:#9fb3c8; margin-top:2px}

  /* Slightly smaller text on HARD to fit neatly */
  body[data-mode="hard"] .face .main{font-size: clamp(16px, 2.1vw, 20px)}
  body[data-mode="hard"] .back{font-size:22px}

  .card.selected .face{outline:2px solid var(--hint)}
  .card.bad .face{outline:2px solid var(--bad); animation: shake .32s linear}
  @keyframes shake{
    0%,100%{transform:translateX(0)}
    20%{transform:translateX(-4px)}
    40%{transform:translateX(4px)}
    60%{transform:translateX(-3px)}
    80%{transform:translateX(3px)}
  }

  /* Matched ‚Äì ostanejo vidne, barva niza (cikliramo 7 barv) */
  .card.matched{pointer-events:none}
  .card.matched .back{opacity:.2}
  .card.matched .face{color:#fff; border-color:transparent}
  .card.matched .face .top{color:rgba(255,255,255,.85)}
  .card.matched .face .sub{color:rgba(255,255,255,.9)}
  .c1 .face{background:linear-gradient(180deg, rgba(139,92,246,.25), rgba(139,92,246,.15)); box-shadow:0 0 0 2px rgba(139,92,246,.55) inset}
  .c2 .face{background:linear-gradient(180deg, rgba(6,182,212,.25), rgba(6,182,212,.15)); box-shadow:0 0 0 2px rgba(6,182,212,.55) inset}
  .c3 .face{background:linear-gradient(180deg, rgba(34,197,94,.25), rgba(34,197,94,.15)); box-shadow:0 0 0 2px rgba(34,197,94,.55) inset}
  .c4 .face{background:linear-gradient(180deg, rgba(249,115,22,.25), rgba(249,115,22,.15)); box-shadow:0 0 0 2px rgba(249,115,22,.55) inset}
  .c5 .face{background:linear-gradient(180deg, rgba(234,179,8,.28), rgba(234,179,8,.17)); box-shadow:0 0 0 2px rgba(234,179,8,.60) inset}
  .c6 .face{background:linear-gradient(180deg, rgba(59,130,246,.28), rgba(59,130,246,.17)); box-shadow:0 0 0 2px rgba(59,130,246,.60) inset}
  .c7 .face{background:linear-gradient(180deg, rgba(239,68,68,.28), rgba(239,68,68,.17)); box-shadow:0 0 0 2px rgba(239,68,68,.60) inset}

  /* win modal */
  .overlay{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; padding:16px; z-index:50}
  .overlay.show{display:flex}
  .dialog{width:min(560px,96%); background:#0b1220; border:1px solid var(--line); border-radius:16px; padding:18px}
  .dialog h2{margin:0 0 8px}
  .winner{margin-top:8px; font-weight:800}

  /* ‚ö° Flash overlay (menjava igralca / zmaga) */
  .flash{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60;
    pointer-events:none;
  }
  .flash.show{display:flex; animation: fadeFlash .9s ease forwards}
  .flash .bubble{
    background: rgba(10, 18, 32, 0.85);
    border: 2px solid #3b82f6;
    border-radius: 16px;
    padding: 16px 28px;
    font-size: clamp(28px,4vw,44px);
    font-weight: 900;
    letter-spacing: .5px;
    text-shadow: 0 2px 8px rgba(0,0,0,.4);
  }
  .flash.win .bubble{ border-color: #22c55e; }
  @keyframes fadeFlash{
    0%{opacity:0; transform: scale(.96)}
    10%{opacity:1; transform: scale(1)}
    80%{opacity:1}
    100%{opacity:0}
  }
</style>
</head>
<body>
<header>
  <h1>Predpone SI ‚Äì spomin (3 segmenti)</h1>
  <div class="controls">
    <div class="group" role="group" aria-label="Naƒçin">
      <button id="soloBtn" class="toggle" aria-pressed="true" title="1 igralec">1 igralec</button>
      <button id="pvpBtn"  class="toggle" aria-pressed="false" title="2 igralca">2 igralca</button>
    </div>
    <div class="group" role="group" aria-label="Te≈æavnost">
      <button id="easyBtn"   class="toggle" aria-pressed="true"  title="10¬≥ ‚Ä¶ 10‚Åª¬≥ + 10‚Å∞">Lahka ¬∑ 7</button>
      <button id="midBtn"    class="toggle" aria-pressed="false" title="Lahka + 10‚Å∂, 10‚Åª‚Å∂">Srednja ¬∑ 9</button>
      <button id="hardBtn"   class="toggle" aria-pressed="false" title="10¬π¬≤ ‚Ä¶ 10‚Åª¬π¬≤ + 10‚Å∞">Te≈æka ¬∑ 13</button>
    </div>
    <button id="resetBtn" class="btn">üîÑ PREME≈†AJ</button>
  </div>
</header>

<div class="stats" role="status" aria-live="polite">
  <span class="stat">‚è±Ô∏è ƒåas: <strong id="time">0:00</strong></span>
  <span class="stat">üéØ Poskusi (izbira 3): <strong id="moves">0</strong></span>
  <span class="stat">‚úÖ Najdeni kompleti: <strong id="found">0</strong>/<strong id="total">7</strong></span>
  <span id="p1" class="stat">üü¶ Igralec 1: <strong id="score1">0</strong></span>
  <span id="p2" class="stat">üü™ Igralec 2: <strong id="score2">0</strong></span>
  <span id="turn" class="stat turn" style="display:none">Na potezi: <strong id="turnName">Igralec 1</strong></span>
</div>

<div class="wrap" id="wrap"></div>

<!-- ZMAGA -->
<div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="winTitle">
  <div class="dialog">
    <h2 id="winTitle">Konec igre üéâ</h2>
    <p>Poskusi: <strong id="wMoves">0</strong> ¬∑ ƒåas: <strong id="wTime">0:00</strong></p>
    <p id="wScores" style="margin:.4rem 0 0 0;"></p>
    <p id="wWinner" class="winner"></p>
    <div style="display:flex; gap:8px; margin-top:12px">
      <button id="againBtn" class="btn">Igraj znova</button>
      <button id="closeBtn" class="btn">Zapri</button>
    </div>
  </div>
</div>

<!-- üîä Fallback audio (po ≈æelji dodaj src datoteke) -->
<audio id="audSwitch" preload="auto"></audio>
<audio id="audWin" preload="auto"></audio>

<!-- ‚ö° Flash overlay -->
<div id="flash" class="flash"><div class="bubble" id="flashText">IGRALEC 1</div></div>

<script>
window.addEventListener('DOMContentLoaded', () => {
/* ======= KONFIG ======= */
const TYPES = ['predpona','znak','potenca']; // 3 segmenti
let mode = 'easy'; // 'easy' | 'medium' | 'hard'

/* ======= CELOTEN NABOR: 10^-12 ... 10^12 + 10^0 ======= */
const ALL_PREFIXES = [
  {pow: 12,  name:'tera',     sym:'T'},
  {pow: 9,   name:'giga',     sym:'G'},
  {pow: 6,   name:'mega',     sym:'M'},
  {pow: 3,   name:'kilo',     sym:'k'},
  {pow: 2,   name:'hekto',    sym:'h'},
  {pow: 1,   name:'deka',     sym:'da'},
  {pow: 0,   name:'Osnovna enota', sym:'Osnovna enota'},
  {pow:-1,   name:'deci',     sym:'d'},
  {pow:-2,   name:'centi',    sym:'c'},
  {pow:-3,   name:'mili',     sym:'m'},
  {pow:-6,   name:'mikro',    sym:'¬µ'},
  {pow:-9,   name:'nano',     sym:'n'},
  {pow:-12,  name:'piko',     sym:'p'},
];

/* aktivni nabor za trenutno te≈æavnost */
function activePrefixes(){
  if(mode==='easy'){    // 7 kompletov: |pow| ‚â§ 3
    return ALL_PREFIXES.filter(p => Math.abs(p.pow) <= 3);
  }
  if(mode==='medium'){  // 9 kompletov: |pow| ‚â§ 3 ali |pow| = 6
    return ALL_PREFIXES.filter(p => Math.abs(p.pow) <= 3 || Math.abs(p.pow) === 6);
  }
  // hard: 13 kompletov: |pow| ‚â§ 12
  return ALL_PREFIXES.filter(p => Math.abs(p.pow) <= 12);
}

/* ======= STANJE ======= */
let players = 'solo';   // 'solo' | 'pvp'
let currentPlayer = 1;  // 1 or 2
let score1 = 0, score2 = 0;

let selections = {};      // {predpona, znak, potenca}
let found = 0, moves = 0, secs = 0, timer = null, lock = false;

const els = {
  wrap: document.getElementById('wrap'),
  time: document.getElementById('time'),
  moves: document.getElementById('moves'),
  found: document.getElementById('found'),
  total: document.getElementById('total'),
  reset: document.getElementById('resetBtn'),
  overlay: document.getElementById('overlay'),
  wMoves: document.getElementById('wMoves'),
  wTime: document.getElementById('wTime'),
  wScores: document.getElementById('wScores'),
  wWinner: document.getElementById('wWinner'),
  again: document.getElementById('againBtn'),
  close: document.getElementById('closeBtn'),
  easyBtn: document.getElementById('easyBtn'),
  midBtn: document.getElementById('midBtn'),
  hardBtn: document.getElementById('hardBtn'),
  soloBtn: document.getElementById('soloBtn'),
  pvpBtn:  document.getElementById('pvpBtn'),
  p1: document.getElementById('p1'),
  p2: document.getElementById('p2'),
  score1: document.getElementById('score1'),
  score2: document.getElementById('score2'),
  turn: document.getElementById('turn'),
  turnName: document.getElementById('turnName'),
  flash: document.getElementById('flash'),
  flashText: document.getElementById('flashText'),
  audSwitch: document.getElementById('audSwitch'),
  audWin: document.getElementById('audWin'),
};

/* ======= AUDIO ======= */
let actx = null;
function ensureAudio(){ if(!actx){ actx = new (window.AudioContext||window.webkitAudioContext)(); } }
function beep(freq=660, dur=140, type='sine', vol=0.2){
  try{
    ensureAudio();
    const o=actx.createOscillator(), g=actx.createGain();
    o.type=type; o.frequency.value=freq; g.gain.value=vol;
    o.connect(g); g.connect(actx.destination);
    o.start(); setTimeout(()=>{ g.gain.exponentialRampToValueAtTime(0.0001, actx.currentTime+0.12); o.stop(actx.currentTime+0.13);}, dur);
  }catch(e){ els.audSwitch.currentTime=0; els.audSwitch.play().catch(()=>{}); }
}
function fanfare(){
  try{
    ensureAudio();
    const now = actx.currentTime;
    const seq = [523,659,784]; // C5-E5-G5
    seq.forEach((f,i)=>{
      const o=actx.createOscillator(), g=actx.createGain();
      o.type='triangle'; o.frequency.value=f; g.gain.value=0.18;
      o.connect(g); g.connect(actx.destination);
      const t=now+i*0.15; o.start(t); o.stop(t+0.18);
    });
  }catch(e){
    els.audWin.currentTime=0; els.audWin.play().catch(()=>{});
  }
}

/* ======= FLASH ======= */
let flashTimer = null;
function showFlash(text, isWin=false){
  els.flashText.textContent = text;
  els.flash.classList.toggle('win', !!isWin);
  els.flash.classList.add('show');
  clearTimeout(flashTimer);
  flashTimer = setTimeout(()=> els.flash.classList.remove('show'), isWin ? 1400 : 900);
}

/* ======= POMO≈ΩNE ======= */
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
const pad = n=>n.toString().padStart(2,'0');
const fmt = s => `${Math.floor(s/60)}:${pad(s%60)}`;
function startTimer(){ if(timer) return; timer = setInterval(()=>{ secs++; els.time.textContent=fmt(secs); }, 1000); }
function titleFor(type){ return {predpona:'1) Predpona', znak:'2) Znak', potenca:'3) Deseti≈°ka potenca'}[type] || type; }
function escapeHtml(s){ return s.replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }
function superscriptPow(pow){
  const map = {'0':'‚Å∞','1':'¬π','2':'¬≤','3':'¬≥','4':'‚Å¥','5':'‚Åµ','6':'‚Å∂','7':'‚Å∑','8':'‚Å∏','9':'‚Åπ','-':'‚Åª'};
  return String(pow).split('').map(ch=>map[ch]||ch).join('');
}

/* ======= PODATKI za prikaz (dinamiƒçno iz izbire te≈æavnosti) ======= */
function makeData(){
  const data = [];
  activePrefixes().forEach(p=>{
    const gid = `p${p.pow}`;
    data.push({group:gid, type:'predpona', label:'Predpona', main:p.name, sub:''});
    data.push({group:gid, type:'znak',     label:'Znak',     main:p.sym,  sub:''});
    data.push({group:gid, type:'potenca',  label:'Deseti≈°ka potenca', main:`10${superscriptPow(p.pow)}`, sub:''});
  });
  return data;
}
function totalGroups(){ return activePrefixes().length; }

/* ======= RISANJE ======= */
let ALL = [];
function buildBoard(){
  ALL = makeData();
  els.wrap.innerHTML = '';
  TYPES.forEach(type=>{
    const cards = shuffle(ALL.filter(d => d.type===type).map((c,i)=>({...c, id:`${type}-${i}`})));
    const seg = document.createElement('section');
    seg.className = 'segment';
    seg.setAttribute('data-type', type);
    seg.innerHTML = `
      <div class="seg-head">
        <div class="seg-title">${titleFor(type)}</div>
        <div class="seg-info">Izberi 1</div>
      </div>
      <div class="cards"></div>
    `;
    const list = seg.querySelector('.cards');

    cards.forEach(c=>{
      const b = document.createElement('button');
      b.className = 'card hidden';
      b.dataset.type = type;
      b.dataset.group = c.group;
      b.dataset.id = c.id;
      b.innerHTML = `
        <div class="inner">
          <div class="back">?</div>
          <div class="face">
            <div class="top"><span>${c.label}</span><span></span></div>
            <div class="main">${escapeHtml(c.main)}</div>
            <div class="sub">${escapeHtml(c.sub)}</div>
          </div>
        </div>
      `;
      b.addEventListener('click', ()=> onSelect(b));
      list.appendChild(b);
    });
    els.wrap.appendChild(seg);
  });
}

function flipUp(btn){ btn.classList.remove('hidden'); btn.classList.add('revealed','selected'); }
function flipDown(btn){ btn.classList.remove('revealed','selected','bad'); btn.classList.add('hidden'); }

/* ======= LOGIKA ======= */
let colorIndex = 0;
function nextColorClass(){ colorIndex = (colorIndex % 7) + 1; return `c${colorIndex}`; }

function onSelect(btn){
  if(lock) return;
  if(btn.getAttribute('aria-disabled')==='true') return;

  startTimer();

  const type = btn.dataset.type;
  if(selections[type]) return; // en pick na segment v tem krogu

  flipUp(btn);
  selections[type] = btn;

  if(Object.keys(selections).length === 3){
    lock = true;
    setTimeout(checkMatch, 220);
  }
}

function checkMatch(){
  moves++; els.moves.textContent = moves;

  const picks = ['predpona','znak','potenca'].map(t => selections[t]);
  const groups = new Set(picks.map(p => p.dataset.group));
  const success = groups.size === 1;

  if(success){
    const cclass = nextColorClass();
    picks.forEach(p => {
      p.classList.add('matched', cclass);
      p.classList.remove('selected');
      p.setAttribute('aria-disabled','true');
    });
    if(players==='pvp'){
      if(currentPlayer===1){ score1++; els.score1.textContent = score1; }
      else{ score2++; els.score2.textContent = score2; }
    }
    found++; els.found.textContent = `${found}`;
    selections = {};
    lock = false;

    if(found === totalGroups()){
      clearInterval(timer); timer = null;
      if(players==='pvp'){
        const msg = (score1>score2) ? 'ZMAGA! IGRALEC 1' : (score2>score1 ? 'ZMAGA! IGRALEC 2' : 'NEODLOƒåENO!');
        showFlash(msg, true);
      }else{
        showFlash('ZMAGA!', true);
      }
      fanfare();
      showWin();
    }
    // pravilen odgovor ‚Üí v PVP ostane isti igralec na potezi

  }else{
    picks.forEach(p => p.classList.add('bad'));
    setTimeout(()=>{
      picks.forEach(p => flipDown(p));
      selections = {};
      if(players==='pvp'){
        currentPlayer = currentPlayer===1 ? 2 : 1; // menjava ob napaki
        updateTurnUI();
        showFlash(currentPlayer===1 ? 'IGRALEC 1' : 'IGRALEC 2');
        beep(660,130,'square',0.22);
      }
      lock = false;
    }, 700);
  }
}

/* ======= UI ======= */
function showWin(){
  els.wMoves.textContent = moves;
  els.wTime.textContent = fmt(secs);
  if(players==='pvp'){
    els.wScores.textContent = `Rezultat ‚Äì Igralec 1: ${score1}, Igralec 2: ${score2}`;
    let winner = '';
    if(score1 > score2) winner = 'Zmagal je Igralec 1 üéâ';
    else if(score2 > score1) winner = 'Zmagal je Igralec 2 üéâ';
    else winner = 'Neodloƒçeno ü§ù';
    els.wWinner.textContent = winner;
  }else{
    els.wScores.textContent = '';
    els.wWinner.textContent = 'Bravo! üéâ';
  }
  els.overlay.classList.add('show');
}
function hideWin(){ els.overlay.classList.remove('show'); }

function updateTurnUI(){
  if(players==='pvp'){
    els.turn.style.display = '';
    els.p1.style.display = '';
    els.p2.style.display = '';
    els.turnName.textContent = currentPlayer===1 ? 'Igralec 1' : 'Igralec 2';
    els.p1.classList.toggle('turn', currentPlayer===1);
    els.p2.classList.toggle('turn', currentPlayer===2);
  }else{
    els.turn.style.display = 'none';
    els.p1.style.display = 'none';
    els.p2.style.display = 'none';
  }
}

function setPlayers(modePlayers){
  players = modePlayers; // 'solo' | 'pvp'
  els.soloBtn.setAttribute('aria-pressed', players==='solo' ? 'true' : 'false');
  els.pvpBtn.setAttribute('aria-pressed',  players==='pvp'  ? 'true' : 'false');
  resetGame();
}

function applyMode(newMode){
  mode = newMode; // 'easy' | 'medium' | 'hard'
  els.easyBtn.setAttribute('aria-pressed', mode==='easy' ? 'true' : 'false');
  els.midBtn.setAttribute('aria-pressed',  mode==='medium' ? 'true' : 'false');
  els.hardBtn.setAttribute('aria-pressed', mode==='hard' ? 'true' : 'false');
  /* toggle body data-attribute for CSS layout changes */
  document.body.dataset.mode = mode;
  resetGame();
}

function resetGame(){
  clearInterval(timer); timer = null; secs = 0;
  els.time.textContent = '0:00';
  moves=0; els.moves.textContent=0;
  found=0; els.found.textContent=0;
  selections={}; lock=false;
  currentPlayer=1; score1=0; score2=0; colorIndex=0;
  els.score1.textContent = '0'; els.score2.textContent = '0';
  els.total.textContent = totalGroups();
  hideWin();
  updateTurnUI();
  buildBoard();
}

/* ======= DOGODKI ======= */
els.reset.addEventListener('click', resetGame);
document.getElementById('againBtn').addEventListener('click', resetGame);
document.getElementById('closeBtn').addEventListener('click', hideWin);
els.soloBtn.addEventListener('click', ()=> setPlayers('solo'));
els.pvpBtn .addEventListener('click', ()=> setPlayers('pvp'));
els.easyBtn.addEventListener('click', ()=> applyMode('easy'));
els.midBtn .addEventListener('click', ()=> applyMode('medium'));
els.hardBtn.addEventListener('click', ()=> applyMode('hard'));

/* Init */
document.body.dataset.mode = mode;  // ensure CSS matches from start
setPlayers('solo');                  // nastavi 1 igralca
applyMode('easy');                   // privzeto Lahka (7 kompletov)
}); // DOMContentLoaded
</script>
</body>
</html>
